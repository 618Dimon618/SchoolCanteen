# Школьная столовая — веб-приложение

Автоматизированная информационная система школьного питания.

## Описание

Веб-приложение для учёта и контроля питания в школьной столовой. Поддерживает три роли пользователей с различными уровнями доступа.

### Роли

**Ученик:**
- Регистрация и авторизация (с подтверждением администратором)
- Просмотр меню завтраков и обедов
- Оплата питания (разовый платёж или абонемент)
- Отметка о получении питания
- Указание пищевых аллергий
- Оставление отзывов о блюдах
- Уведомления о статусе заказов

**Повар:**
- Просмотр заказов учеников
- Приготовление блюд по отдельности
- Отметка заказа как готового к выдаче
- Контроль остатков продуктов на складе
- Управление доступностью блюд
- Создание и удаление блюд с указанием ингредиентов
- Оформление заявок на закупку продуктов
- Просмотр выданных завтраков и обедов

**Администратор:**
- Просмотр статистики оплат и посещаемости
- Согласование заявок на закупку продуктов
- Подтверждение и отклонение регистраций учеников
- Формирование отчётов по питанию и затратам (Excel)
- Управление пользователями

## Технологии

- Python 3.10+
- Flask (веб-фреймворк)
- SQLAlchemy + SQLite (база данных)
- Jinja2 (шаблонизатор)
- HTML/CSS
- openpyxl (генерация Excel-отчётов)

## Установка и запуск

1. Клонировать репозиторий:
```bash
git clone https://github.com/618Dimon618/SchoolCanteen.git
cd SchoolCanteen
```

2. Создать виртуальное окружение:
```bash
python -m venv .venv
```

3. Активировать виртуальное окружение:

Windows:
```bash
.venv\Scripts\activate
```

Linux/Mac:
```bash
source .venv/bin/activate
```

4. Установить зависимости:
```bash
pip install -r requirements.txt
```

5. Инициализировать базу данных:
```bash
python init_db.py
```

6. Запустить приложение:
```bash
python app.py
```

7. Открыть в браузере: http://127.0.0.1:5000

## Тестовые пользователи

| Логин | Пароль | Роль |
|-------|--------|------|
| admin | admin123 | Администратор |
| cook | cook123 | Повар |
| student1 | student123 | Ученик |

## Структура проекта

```
SchoolCanteen/
├── app.py              # Основное приложение Flask, маршруты
├── models.py           # Модели базы данных (SQLAlchemy)
├── db_functions.py     # Функции для работы с базой данных
├── init_db.py          # Скрипт инициализации базы данных
├── requirements.txt    # Зависимости проекта
├── README.md           # Документация
├── templates/          # HTML-шаблоны
│   ├── base.html       # Базовый шаблон
│   ├── login.html      # Страница входа
│   ├── register.html   # Страница регистрации
│   ├── student.html    # Панель ученика
│   ├── cook.html       # Панель повара (заказы)
│   ├── cook_dishes.html# Панель повара (управление блюдами)
│   ├── cook_issued.html# Панель повара (посещение)
│   ├── admin.html      # Панель администратора
│   ├── profile.html    # Профиль пользователя
│   ├── notifications.html # Уведомления
│   └── review.html     # Отзывы
├── static/             # Статические файлы
│   └── style.css       # Стили
└── instance/
    └── canteen.db      # База данных SQLite
```

## База данных

SQLite выбрана как СУБД по следующим причинам:
- Не требует отдельного сервера
- Файловая база данных, легко переносится
- Подходит для масштаба школьного приложения
- Встроена в Python (модуль sqlite3)

### Таблицы:
- **User** — пользователи (ученики, повара, администраторы)
- **Allergy** — список аллергенов
- **UserAllergy** — аллергии пользователей
- **Category** — категории блюд (суп, горячее, салат, напиток)
- **MenuItem** — блюда меню
- **MenuItemAllergy** — аллергены в блюдах
- **Product** — продукты на складе
- **MenuItemIngredient** — ингредиенты блюд (связь блюдо-продукт)
- **Subscription** — абонементы учеников
- **Order** — заказы
- **OrderItem** — позиции заказов
- **Payment** — платежи
- **Review** — отзывы
- **PurchaseRequest** — заявки на закупку
- **Notification** — уведомления
